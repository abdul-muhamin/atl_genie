{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 5, "column": 0}, "map": {"version":3,"sources":["/turbopack/[project]/src/components/ui/badge.tsx"],"sourcesContent":["import * as React from \"react\"\r\nimport { cva, type VariantProps } from \"class-variance-authority\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst badgeVariants = cva(\r\n  \"inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default:\r\n          \"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80\",\r\n        secondary:\r\n          \"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80\",\r\n        destructive:\r\n          \"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80\",\r\n        outline: \"text-foreground\",\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: \"default\",\r\n    },\r\n  }\r\n)\r\n\r\nexport interface BadgeProps\r\n  extends React.HTMLAttributes<HTMLDivElement>,\r\n    VariantProps<typeof badgeVariants> {}\r\n\r\nfunction Badge({ className, variant, ...props }: BadgeProps) {\r\n  return (\r\n    <div className={cn(badgeVariants({ variant }), className)} {...props} />\r\n  )\r\n}\r\n\r\nexport { Badge, badgeVariants }\r\n"],"names":[],"mappings":";;;;;;;;;;;AAKA,MAAM,gBAAgB,CAAA,GAAA,mKAAA,CAAA,MAAG,AAAD,EACtB,wKACA;IACE,UAAU;QACR,SAAS;YACP,SACE;YACF,WACE;YACF,aACE;YACF,SAAS;QACX;IACF;IACA,iBAAiB;QACf,SAAS;IACX;AACF;AAOF,SAAS,MAAM,EAAE,SAAS,EAAE,OAAO,EAAE,GAAG,OAAmB;IACzD,qBACE,6LAAC;QAAI,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,cAAc;YAAE;QAAQ,IAAI;QAAa,GAAG,KAAK;;;;;;AAExE;KAJS"}},
    {"offset": {"line": 45, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 50, "column": 0}, "map": {"version":3,"sources":["/turbopack/[project]/src/components/ui/alert-dialog.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport * as React from \"react\"\r\nimport * as AlertDialogPrimitive from \"@radix-ui/react-alert-dialog\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\nimport { buttonVariants } from \"@/components/ui/button\"\r\n\r\nconst AlertDialog = AlertDialogPrimitive.Root\r\n\r\nconst AlertDialogTrigger = AlertDialogPrimitive.Trigger\r\n\r\nconst AlertDialogPortal = AlertDialogPrimitive.Portal\r\n\r\nconst AlertDialogOverlay = React.forwardRef<\r\n  React.ElementRef<typeof AlertDialogPrimitive.Overlay>,\r\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Overlay>\r\n>(({ className, ...props }, ref) => (\r\n  <AlertDialogPrimitive.Overlay\r\n    className={cn(\r\n      \"fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\r\n      className\r\n    )}\r\n    {...props}\r\n    ref={ref}\r\n  />\r\n))\r\nAlertDialogOverlay.displayName = AlertDialogPrimitive.Overlay.displayName\r\n\r\nconst AlertDialogContent = React.forwardRef<\r\n  React.ElementRef<typeof AlertDialogPrimitive.Content>,\r\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Content>\r\n>(({ className, ...props }, ref) => (\r\n  <AlertDialogPortal>\r\n    <AlertDialogOverlay />\r\n    <AlertDialogPrimitive.Content\r\n      ref={ref}\r\n      className={cn(\r\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  </AlertDialogPortal>\r\n))\r\nAlertDialogContent.displayName = AlertDialogPrimitive.Content.displayName\r\n\r\nconst AlertDialogHeader = ({\r\n  className,\r\n  ...props\r\n}: React.HTMLAttributes<HTMLDivElement>) => (\r\n  <div\r\n    className={cn(\r\n      \"flex flex-col space-y-2 text-center sm:text-left\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n)\r\nAlertDialogHeader.displayName = \"AlertDialogHeader\"\r\n\r\nconst AlertDialogFooter = ({\r\n  className,\r\n  ...props\r\n}: React.HTMLAttributes<HTMLDivElement>) => (\r\n  <div\r\n    className={cn(\r\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n)\r\nAlertDialogFooter.displayName = \"AlertDialogFooter\"\r\n\r\nconst AlertDialogTitle = React.forwardRef<\r\n  React.ElementRef<typeof AlertDialogPrimitive.Title>,\r\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Title>\r\n>(({ className, ...props }, ref) => (\r\n  <AlertDialogPrimitive.Title\r\n    ref={ref}\r\n    className={cn(\"text-lg font-semibold\", className)}\r\n    {...props}\r\n  />\r\n))\r\nAlertDialogTitle.displayName = AlertDialogPrimitive.Title.displayName\r\n\r\nconst AlertDialogDescription = React.forwardRef<\r\n  React.ElementRef<typeof AlertDialogPrimitive.Description>,\r\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Description>\r\n>(({ className, ...props }, ref) => (\r\n  <AlertDialogPrimitive.Description\r\n    ref={ref}\r\n    className={cn(\"text-sm text-muted-foreground\", className)}\r\n    {...props}\r\n  />\r\n))\r\nAlertDialogDescription.displayName =\r\n  AlertDialogPrimitive.Description.displayName\r\n\r\nconst AlertDialogAction = React.forwardRef<\r\n  React.ElementRef<typeof AlertDialogPrimitive.Action>,\r\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Action>\r\n>(({ className, ...props }, ref) => (\r\n  <AlertDialogPrimitive.Action\r\n    ref={ref}\r\n    className={cn(buttonVariants(), className)}\r\n    {...props}\r\n  />\r\n))\r\nAlertDialogAction.displayName = AlertDialogPrimitive.Action.displayName\r\n\r\nconst AlertDialogCancel = React.forwardRef<\r\n  React.ElementRef<typeof AlertDialogPrimitive.Cancel>,\r\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Cancel>\r\n>(({ className, ...props }, ref) => (\r\n  <AlertDialogPrimitive.Cancel\r\n    ref={ref}\r\n    className={cn(\r\n      buttonVariants({ variant: \"outline\" }),\r\n      \"mt-2 sm:mt-0\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nAlertDialogCancel.displayName = AlertDialogPrimitive.Cancel.displayName\r\n\r\nexport {\r\n  AlertDialog,\r\n  AlertDialogPortal,\r\n  AlertDialogOverlay,\r\n  AlertDialogTrigger,\r\n  AlertDialogContent,\r\n  AlertDialogHeader,\r\n  AlertDialogFooter,\r\n  AlertDialogTitle,\r\n  AlertDialogDescription,\r\n  AlertDialogAction,\r\n  AlertDialogCancel,\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AAAA;;;;;;AAQA,MAAM,cAAc,+KAAqB,IAAI;AAE7C,MAAM,qBAAqB,+KAAqB,OAAO;AAEvD,MAAM,oBAAoB,+KAAqB,MAAM;AAErD,MAAM,mCAAqB,8JAAM,UAAU,CAGzC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,+KAAqB,OAAO;QAC3B,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,0JACA;QAED,GAAG,KAAK;QACT,KAAK;;;;;;KAVH;AAaN,mBAAmB,WAAW,GAAG,+KAAqB,OAAO,CAAC,WAAW;AAEzE,MAAM,mCAAqB,8JAAM,UAAU,OAGzC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;;0BACC,6LAAC;;;;;0BACD,6LAAC,+KAAqB,OAAO;gBAC3B,KAAK;gBACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,+fACA;gBAED,GAAG,KAAK;;;;;;;;;;;;;AAIf,mBAAmB,WAAW,GAAG,+KAAqB,OAAO,CAAC,WAAW;AAEzE,MAAM,oBAAoB,CAAC,EACzB,SAAS,EACT,GAAG,OACkC,iBACrC,6LAAC;QACC,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,oDACA;QAED,GAAG,KAAK;;;;;;MATP;AAYN,kBAAkB,WAAW,GAAG;AAEhC,MAAM,oBAAoB,CAAC,EACzB,SAAS,EACT,GAAG,OACkC,iBACrC,6LAAC;QACC,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,iEACA;QAED,GAAG,KAAK;;;;;;MATP;AAYN,kBAAkB,WAAW,GAAG;AAEhC,MAAM,iCAAmB,8JAAM,UAAU,OAGvC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,+KAAqB,KAAK;QACzB,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,yBAAyB;QACtC,GAAG,KAAK;;;;;;;AAGb,iBAAiB,WAAW,GAAG,+KAAqB,KAAK,CAAC,WAAW;AAErE,MAAM,uCAAyB,8JAAM,UAAU,OAG7C,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,+KAAqB,WAAW;QAC/B,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,iCAAiC;QAC9C,GAAG,KAAK;;;;;;;AAGb,uBAAuB,WAAW,GAChC,+KAAqB,WAAW,CAAC,WAAW;AAE9C,MAAM,kCAAoB,8JAAM,UAAU,OAGxC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,+KAAqB,MAAM;QAC1B,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,CAAA,GAAA,qIAAA,CAAA,iBAAc,AAAD,KAAK;QAC/B,GAAG,KAAK;;;;;;;AAGb,kBAAkB,WAAW,GAAG,+KAAqB,MAAM,CAAC,WAAW;AAEvE,MAAM,kCAAoB,8JAAM,UAAU,QAGxC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,+KAAqB,MAAM;QAC1B,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,CAAA,GAAA,qIAAA,CAAA,iBAAc,AAAD,EAAE;YAAE,SAAS;QAAU,IACpC,gBACA;QAED,GAAG,KAAK;;;;;;;AAGb,kBAAkB,WAAW,GAAG,+KAAqB,MAAM,CAAC,WAAW"}},
    {"offset": {"line": 194, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 199, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 206, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 211, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 213, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 227, "column": 0}, "map": {"version":3,"sources":["/turbopack/[project]/src/app/ask-anything/[chatId]/utils/validateDocReq.ts"],"sourcesContent":["import { UploadedFile } from '../_components/UploadDocument'\r\n\r\nexport function validateReq(file: UploadedFile, apiKey: string | null) {\r\n  let msg = ''\r\n  if (!file?.size) {\r\n    msg = 'File is required.'\r\n    return {\r\n      isValid: false,\r\n      msg,\r\n    }\r\n  }\r\n  if (!apiKey) {\r\n    msg = 'API Key is required.'\r\n    return {\r\n      isValid: false,\r\n      msg,\r\n    }\r\n  }\r\n  if (file.size > 5 * 1024 * 1024) {\r\n    msg = 'File size should be less than 5MB.'\r\n    return {\r\n      isValid: false,\r\n      msg,\r\n    }\r\n  }\r\n  if (file.type !== 'application/pdf') {\r\n    msg = 'Only PDF files are allowed.'\r\n    return {\r\n      isValid: false,\r\n      msg,\r\n    }\r\n  }\r\n  return {\r\n    isValid: true,\r\n    msg,\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;AAEO,SAAS,YAAY,IAAkB,EAAE,MAAqB;IACnE,IAAI,MAAM;IACV,IAAI,CAAC,MAAM,MAAM;QACf,MAAM;QACN,OAAO;YACL,SAAS;YACT;QACF;IACF;IACA,IAAI,CAAC,QAAQ;QACX,MAAM;QACN,OAAO;YACL,SAAS;YACT;QACF;IACF;IACA,IAAI,KAAK,IAAI,GAAG,IAAI,OAAO,MAAM;QAC/B,MAAM;QACN,OAAO;YACL,SAAS;YACT;QACF;IACF;IACA,IAAI,KAAK,IAAI,KAAK,mBAAmB;QACnC,MAAM;QACN,OAAO;YACL,SAAS;YACT;QACF;IACF;IACA,OAAO;QACL,SAAS;QACT;IACF;AACF"}},
    {"offset": {"line": 265, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 270, "column": 0}, "map": {"version":3,"sources":["/turbopack/[project]/src/app/ask-anything/[chatId]/_components/UploadDocument.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useTransition } from \"react\";\r\nimport { toast } from \"sonner\";\r\n\r\nimport { addChat, getAllChats, getChat, updateChat } from \"@/app/_lib/db\";\r\nimport { store } from \"@/app/_utils/store\";\r\nimport {\r\n  AlertDialog,\r\n  AlertDialogCancel,\r\n  AlertDialogContent,\r\n  AlertDialogDescription,\r\n  AlertDialogFooter,\r\n  AlertDialogHeader,\r\n  AlertDialogTitle,\r\n} from \"@/components/ui/alert-dialog\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { addDocument } from \"../actions\";\r\nimport { validateReq } from \"../utils/validateDocReq\";\r\n\r\ninterface Props {\r\n  isOpen: boolean;\r\n  setIsOpen: (open: boolean) => void;\r\n}\r\n\r\nexport interface UploadedFile {\r\n  size: number;\r\n  type: string;\r\n  name: string;\r\n  lastModified: number;\r\n  stream: () => ReadableStream<Uint8Array>;\r\n}\r\n\r\nexport const UploadDocument = ({ isOpen, setIsOpen }: Props) => {\r\n  const [isPending, startTransition] = useTransition();\r\n  const { set, useSnapshot } = store;\r\n  const { selectedChat } = useSnapshot();\r\n  const router = useRouter();\r\n\r\n  const handleSubmit = async (event: React.FormEvent<HTMLFormElement>) => {\r\n    event.preventDefault();\r\n    if (isPending) return;\r\n\r\n    const formData = new FormData(event.currentTarget);\r\n    const file = formData.get(\"file\") as UploadedFile;\r\n    const apiKey = localStorage.getItem(\"openai:key\");\r\n\r\n    const { isValid, msg } = validateReq(file, apiKey);\r\n    if (!isValid) {\r\n      toast.error(msg);\r\n      return;\r\n    }\r\n    formData.append(\"apiKey\", apiKey!);\r\n\r\n    try { \r\n      startTransition(async () => {\r\n        toast.promise(addDocument(formData), {\r\n          success: async ({ indexId }) => {\r\n            if (!selectedChat?.id) {\r\n              // in case the user uploaded a document from /ask-anything\r\n              const _newChatId = await addChat({\r\n                indexId,\r\n                doc: {\r\n                  size: file.size,\r\n                  type: file.type,\r\n                  name: file.name,\r\n                  lastModified: file.lastModified,\r\n                },\r\n              });\r\n              const newChat = await getChat({ id: _newChatId });\r\n              const allChats = await getAllChats();\r\n\r\n              set(\"selectedChat\", newChat);\r\n              set(\"chats\", allChats);\r\n              set(\"stateMetadata\", {\r\n                chatId: _newChatId,\r\n                message: \"\",\r\n                indexId,\r\n              });\r\n              router.push(`/ask-anything/${_newChatId}`);\r\n              setIsOpen(false);\r\n              toast.dismiss();\r\n              return `File uploaded and chat created.`;\r\n            } else {\r\n              // document from /ask-anything/[chatId]\r\n              await updateChat({\r\n                id: selectedChat.id,\r\n                indexId,\r\n                doc: {\r\n                  size: file.size,\r\n                  type: file.type,\r\n                  name: file.name,\r\n                  lastModified: file.lastModified,\r\n                },\r\n              });\r\n              set(\"selectedChat\", {\r\n                ...selectedChat,\r\n                indexId,\r\n                doc: {\r\n                  size: file.size,\r\n                  type: file.type,\r\n                  name: file.name,\r\n                  lastModified: file.lastModified,\r\n                },\r\n              });\r\n              setIsOpen(false);\r\n              toast.dismiss();\r\n              return `File uploaded.`;\r\n            }\r\n          },\r\n          error: \"Error uploading file\",\r\n        });\r\n      });\r\n    } catch (error) {\r\n      if (error instanceof Error) {\r\n        toast.error(error.message);\r\n        return;\r\n      }\r\n      toast.error(\"Something went wrong\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <AlertDialog open={isOpen} onOpenChange={setIsOpen}>\r\n      <AlertDialogContent className=\"w-[90%] sm:max-w-[425px]\">\r\n        <AlertDialogHeader>\r\n          <AlertDialogTitle>Upload Document</AlertDialogTitle>\r\n          <AlertDialogDescription>\r\n            After you upload, you can chat with the AI against the document.\r\n          </AlertDialogDescription>\r\n        </AlertDialogHeader>\r\n        <form onSubmit={handleSubmit}>\r\n          <div className=\"grid gap-4 pb-4\">\r\n            <div className=\"items-center gap-4\">\r\n              <Input\r\n                id=\"file\"\r\n                type=\"file\"\r\n                name=\"file\"\r\n                multiple={false}\r\n                className=\"w-full cursor-pointer\"\r\n                accept=\".pdf, .txt\"\r\n              />\r\n            </div>\r\n          </div>\r\n          <AlertDialogFooter>\r\n            <AlertDialogCancel disabled={isPending}>Cancel</AlertDialogCancel>\r\n            <Button type=\"submit\" disabled={isPending} className=\"bg-crayola\">\r\n              {isPending ? \"Submitting ...\" : \"Add\"}\r\n            </Button>\r\n          </AlertDialogFooter>\r\n        </form>\r\n      </AlertDialogContent>\r\n    </AlertDialog>\r\n  );\r\n};\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 496, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 501, "column": 0}, "map": {"version":3,"sources":["/turbopack/[project]/src/app/ask-anything/[chatId]/_components/UploadDocumentWrapper.tsx"],"sourcesContent":["\"use client\";\r\nimport { Chat } from \"../../../../app/_lib/db\";\r\nimport { truncateString } from \"../../../../app/_utils\";\r\nimport { Badge } from \"../../../../components/ui/badge\";\r\nimport { Paperclip, FileBarChart2 } from \"lucide-react\";\r\nimport { useState } from \"react\";\r\nimport { UploadDocument } from \"./UploadDocument\";\r\nimport React from \"react\"; \r\nimport {Tooltip} from \"@nextui-org/tooltip\";\r\nimport { Button } from \"@/components/ui/button\";\r\n\r\nconst UploadDocumentWrapper = ({\r\n  selectedChat,\r\n}: {\r\n  selectedChat: Chat | undefined;\r\n}) => {\r\n  const [isUploadDocOpen, setIsUploadDocOpen] = useState(false);\r\n  const name = selectedChat?.doc?.name!;\r\n\r\n  return (\r\n    <>\r\n      {selectedChat?.doc?.name ? (\r\n          <Badge className=\"gap-1 max-w-48 rounded-3xl border border-primary text-xs text-white px-5 py-2 dark:border-white\">\r\n            <FileBarChart2 className=\"h-3 w-3\" />\r\n            {truncateString(name, 16)}\r\n          </Badge>\r\n      ) : ( \r\n        <>\r\n            <Tooltip content=\"Hint: If you want the bot to respond to your queries based on a document, you can upload that document here\"   \r\n              placement=\"bottom\"\r\n              classNames={{\r\n                content: [\r\n                  \"text-white mx-auto w-max max-w-xs rounded-md bg-gray-800 p-1 text-xs text-white shadow-lg\",\r\n                ],\r\n              }}\r\n            >\r\n              <Button\r\n                variant={\"outline\"}\r\n                className=\"group max-w-48 bg-transparent cursor-pointer rounded-3xl border border-[#575757] px-5 text-xs text-[#575757] transition duration-300 hover:border-crayola hover:bg-transparent dark:border-white dark:text-white dark:hover:border-crayola\"\r\n                onClick={() => setIsUploadDocOpen(true)}\r\n              >\r\n                <div className=\"flex items-center gap-2\">\r\n                  <Paperclip className=\"h-4 w-4 transition duration-300 group-hover:text-crayola dark:text-[#EBEBEB]\" />\r\n                  <span className=\"font-semibold transition duration-300 group-hover:text-crayola\">\r\n                    Attach Knowledge\r\n                  </span>\r\n                </div>\r\n              </Button>\r\n            </Tooltip>\r\n            {isUploadDocOpen && (\r\n              <UploadDocument\r\n                isOpen={isUploadDocOpen}\r\n                setIsOpen={setIsUploadDocOpen}\r\n              />\r\n            )}\r\n          </>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport { UploadDocumentWrapper };\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;AAAA;;;;;;;;AAWA,MAAM,wBAAwB,CAAC,EAC7B,YAAY,EAGb;;IACC,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACvD,MAAM,OAAO,cAAc,KAAK;IAEhC,qBACE;kBACG,cAAc,KAAK,qBAChB,6LAAC,oIAAA,CAAA,QAAK;YAAC,WAAU;;8BACf,6LAAC,mOAAA,CAAA,gBAAa;oBAAC,WAAU;;;;;;gBACxB,CAAA,GAAA,kIAAA,CAAA,iBAAc,AAAD,EAAE,MAAM;;;;;;iCAG1B;;8BACI,6LAAC,yNAAA,CAAA,UAAO;oBAAC,SAAQ;oBACf,WAAU;oBACV,YAAY;wBACV,SAAS;4BACP;yBACD;oBACH;8BAEA,cAAA,6LAAC,qIAAA,CAAA,SAAM;wBACL,SAAS;wBACT,WAAU;wBACV,SAAS,IAAM,mBAAmB;kCAElC,cAAA,6LAAC;4BAAI,WAAU;;8CACb,6LAAC,+MAAA,CAAA,YAAS;oCAAC,WAAU;;;;;;8CACrB,6LAAC;oCAAK,WAAU;8CAAiE;;;;;;;;;;;;;;;;;;;;;;gBAMtF,iCACC,6LAAC,gLAAA,CAAA,iBAAc;oBACb,QAAQ;oBACR,WAAW;;;;;;;;;AAO3B;GAhDM;KAAA"}},
    {"offset": {"line": 611, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 616, "column": 0}, "map": {"version":3,"sources":["/turbopack/[project]/src/app/ask-anything/[chatId]/_components/ChatHeader.tsx"],"sourcesContent":["'use client';\r\nimport { getAllChats, getChat, updateChat } from \"@/app/_lib/db\";\r\nimport { truncateString } from \"@/app/_utils\";\r\nimport { store } from \"@/app/_utils/store\";\r\nimport { PencilLine } from \"lucide-react\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { UploadDocumentWrapper } from \"./UploadDocumentWrapper\";\r\nimport { usePathname } from \"next/navigation\";\r\n\r\nexport function ChatHeader() {\r\n  const [isSmScreen, setIsSmScreen] = useState(false);\r\n  const { set, useSnapshot } = store;\r\n  const { selectedChat } = useSnapshot();\r\n  const [title, setTitle] = useState(\"\");\r\n  const [isEditing, setIsEditing] = useState(false);\r\n  const handleEditClick = () => {\r\n    if (selectedChat?.id) {\r\n      setTitle(selectedChat?.name);\r\n      setIsEditing((prev) => !prev);\r\n    }\r\n  };\r\n\r\n  const pathname = usePathname();\r\n\r\n  useEffect(() => {\r\n    const getChatId = async () => {\r\n      const id = Number(pathname.split(\"/\")[2]);\r\n      const chatId = isNaN(id) ? null : id;\r\n      if (chatId) {\r\n        const updatedChat = await getChat({ id });\r\n        set(\"selectedChat\", updatedChat);\r\n      }\r\n    };\r\n    getChatId();\r\n  }, [pathname]);\r\n\r\n  useEffect(() => {\r\n    const checkScreenSize = () => {\r\n      setIsSmScreen(window.innerWidth < 768);\r\n    };\r\n    // Set initial value\r\n    checkScreenSize();\r\n    // Add event listener\r\n    window.addEventListener('resize', checkScreenSize);\r\n    // Clean up the event listener on component unmount\r\n    return () => window.removeEventListener('resize', checkScreenSize);\r\n  }, []);\r\n\r\n  const handleKeyPress = (event: React.KeyboardEvent<HTMLInputElement>) => {\r\n    if (!title.length) return;\r\n    if (event.key === \"Enter\") {\r\n      event.preventDefault();\r\n      onSave();\r\n    }\r\n  };\r\n\r\n  const onSave = async () => {\r\n    const id = selectedChat?.id;\r\n    if (!title.length || !id) {\r\n      setIsEditing(false);\r\n      setTitle(\"\");\r\n      return;\r\n    }\r\n    await updateChat({\r\n      id,\r\n      name: title,\r\n    });\r\n\r\n    const updated = await getAllChats();\r\n    set(\"chats\", updated);\r\n\r\n    const updatedChat = await getChat({ id });\r\n\r\n    set(\"selectedChat\", updatedChat);\r\n\r\n    setIsEditing(false);\r\n    setTitle(\"\");\r\n  };\r\n\r\n  return (\r\n    <div className=\"grid h-[85px] w-full grid-cols-3 grid-rows-1 gap-x-2.5 gap-y-0\">\r\n      <div className=\"col-start-1 col-end-4 row-start-1 row-end-2 bg-[#EDEDED] dark:bg-[#404043]\" />\r\n      <div className=\"col-start-1 col-end-3 row-start-1 row-end-2 flex items-center justify-start px-3 md:px-10\">\r\n        <div\r\n          className=\"flex cursor-pointer items-center justify-center\"\r\n          onClick={handleEditClick}\r\n        >\r\n          {!isEditing && selectedChat?.name && (\r\n            <PencilLine className=\"mr-2 h-4 w-4 fill-[#B6B4B5] stroke-[#C8C8C8] hover:fill-[#1B9E84] hover:stroke-[#9fdecf]\" />\r\n          )}\r\n        </div>\r\n        {isEditing ? (\r\n          <>\r\n            <Input\r\n              className=\"text-sm font-medium\"\r\n              placeholder=\"title ...\"\r\n              ref={(input) => input?.focus()}\r\n              value={title}\r\n              onKeyDown={handleKeyPress}\r\n              onBlur={onSave}\r\n              onChange={(e) => setTitle(e.target.value)}\r\n            />\r\n          </>\r\n        ) : (\r\n          <>\r\n            <span className=\"block font-medium text-muted-foreground md:hidden\">\r\n              {selectedChat?.name && truncateString(selectedChat.name, 18)}\r\n            </span>\r\n            <span className=\"hidden font-medium text-muted-foreground md:block\">\r\n              {selectedChat?.name && truncateString(selectedChat.name, 26)}\r\n            </span>\r\n          </>\r\n        )}\r\n      </div>\r\n      <div className=\"col-start-3 col-end-4 row-start-1 row-end-2 flex items-center justify-end px-3 md:px-10\">\r\n        {(!isSmScreen || !isEditing) &&( \r\n          <UploadDocumentWrapper selectedChat={selectedChat} />\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAAA;;;;;;;;;AAUO,SAAS;;IACd,MAAM,CAAC,YAAY,cAAc,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAC7C,MAAM,EAAE,GAAG,EAAE,WAAW,EAAE,GAAG,yIAAA,CAAA,QAAK;IAClC,MAAM,EAAE,YAAY,EAAE,GAAG;IACzB,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACnC,MAAM,CAAC,WAAW,aAAa,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAC3C,MAAM,kBAAkB;QACtB,IAAI,cAAc,IAAI;YACpB,SAAS,cAAc;YACvB,aAAa,CAAC,OAAS,CAAC;QAC1B;IACF;IAEA,MAAM,WAAW,CAAA,GAAA,qIAAA,CAAA,cAAW,AAAD;IAE3B,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD,EAAE;QACR,MAAM,YAAY;YAChB,MAAM,KAAK,OAAO,SAAS,KAAK,CAAC,IAAI,CAAC,EAAE;YACxC,MAAM,SAAS,MAAM,MAAM,OAAO;YAClC,IAAI,QAAQ;gBACV,MAAM,cAAc,MAAM,CAAA,GAAA,oIAAA,CAAA,UAAO,AAAD,EAAE;oBAAE;gBAAG;gBACvC,IAAI,gBAAgB;YACtB;QACF;QACA;IACF,GAAG;QAAC;KAAS;IAEb,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD,EAAE;QACR,MAAM,kBAAkB;YACtB,cAAc,OAAO,UAAU,GAAG;QACpC;QACA,oBAAoB;QACpB;QACA,qBAAqB;QACrB,OAAO,gBAAgB,CAAC,UAAU;QAClC,mDAAmD;QACnD,OAAO,IAAM,OAAO,mBAAmB,CAAC,UAAU;IACpD,GAAG,EAAE;IAEL,MAAM,iBAAiB,CAAC;QACtB,IAAI,CAAC,MAAM,MAAM,EAAE;QACnB,IAAI,MAAM,GAAG,KAAK,SAAS;YACzB,MAAM,cAAc;YACpB;QACF;IACF;IAEA,MAAM,SAAS;QACb,MAAM,KAAK,cAAc;QACzB,IAAI,CAAC,MAAM,MAAM,IAAI,CAAC,IAAI;YACxB,aAAa;YACb,SAAS;YACT;QACF;QACA,MAAM,CAAA,GAAA,oIAAA,CAAA,aAAU,AAAD,EAAE;YACf;YACA,MAAM;QACR;QAEA,MAAM,UAAU,MAAM,CAAA,GAAA,oIAAA,CAAA,cAAW,AAAD;QAChC,IAAI,SAAS;QAEb,MAAM,cAAc,MAAM,CAAA,GAAA,oIAAA,CAAA,UAAO,AAAD,EAAE;YAAE;QAAG;QAEvC,IAAI,gBAAgB;QAEpB,aAAa;QACb,SAAS;IACX;IAEA,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAI,WAAU;;;;;;0BACf,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBACC,WAAU;wBACV,SAAS;kCAER,CAAC,aAAa,cAAc,sBAC3B,6LAAC,qNAAA,CAAA,aAAU;4BAAC,WAAU;;;;;;;;;;;oBAGzB,0BACC;kCACE,cAAA,6LAAC,oIAAA,CAAA,QAAK;4BACJ,WAAU;4BACV,aAAY;4BACZ,KAAK,CAAC,QAAU,OAAO;4BACvB,OAAO;4BACP,WAAW;4BACX,QAAQ;4BACR,UAAU,CAAC,IAAM,SAAS,EAAE,MAAM,CAAC,KAAK;;;;;;sDAI5C;;0CACE,6LAAC;gCAAK,WAAU;0CACb,cAAc,QAAQ,CAAA,GAAA,kIAAA,CAAA,iBAAc,AAAD,EAAE,aAAa,IAAI,EAAE;;;;;;0CAE3D,6LAAC;gCAAK,WAAU;0CACb,cAAc,QAAQ,CAAA,GAAA,kIAAA,CAAA,iBAAc,AAAD,EAAE,aAAa,IAAI,EAAE;;;;;;;;;;;;;;0BAKjE,6LAAC;gBAAI,WAAU;0BACZ,CAAC,CAAC,cAAc,CAAC,SAAS,mBACzB,6LAAC,uLAAA,CAAA,wBAAqB;oBAAC,cAAc;;;;;;;;;;;;;;;;;AAK/C;GAhHgB;;QAaG,qIAAA,CAAA,cAAW;;;KAbd"}},
    {"offset": {"line": 806, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}